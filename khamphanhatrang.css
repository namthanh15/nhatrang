@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;500;600&display=swap');

/* --- Variables --- */
:root {
    /* Light Mode Palette (Soft) */
    --bg-color-light: #f0f4f8;
    --text-color-light: #455a64;
    --text-color-light-secondary: #607d8b;
    --heading-color-light: #263238;
    --accent-color-primary: #4db6ac; /* Soft Teal */
    --accent-color-secondary: #ffca28; /* Soft Amber */
    --card-bg-light: rgba(255, 255, 255, 0.9);
    --nav-bg-light: rgba(77, 182, 172, 0.92);
    --shadow-light: rgba(77, 182, 172, 0.12);
    --gradient-light: linear-gradient(145deg, #eef4f8, #f8fafc);
    --gradient-accent: linear-gradient(45deg, var(--accent-color-primary), var(--accent-color-secondary));
    --wave-color-1-light: #4db6ac;
    --wave-color-2-light: #64c8c0;
    --wave-color-3-light: #80d4cd;
    --border-color-light: #cfd8dc;

    /* Dark Mode Palette */
    --bg-color-dark: #0f172a; /* Dark Slate */
    --text-color-dark: #cbd5e1; /* Light Slate Gray */
    --text-color-dark-secondary: #94a3b8;
    --heading-color-dark: #f1f5f9; /* Lighter Slate */
    --accent-color-primary-dark: #5eead4; /* Brighter Teal */
    --accent-color-secondary-dark: #fcd34d; /* Brighter Amber */
    --card-bg-dark: rgba(30, 41, 59, 0.85); /* Darker Slate */
    --nav-bg-dark: rgba(15, 23, 42, 0.9); /* Very Dark Slate */
    --shadow-dark: rgba(0, 0, 0, 0.25);
    --gradient-dark: linear-gradient(145deg, #0f172a, #1e293b);
    --gradient-accent-dark: linear-gradient(45deg, var(--accent-color-primary-dark), var(--accent-color-secondary-dark));
    --wave-color-1-dark: #0d9488; /* Dark Teal */
    --wave-color-2-dark: #0f766e;
    --wave-color-3-dark: #115e59;
    --border-color-dark: #334155; /* Slate */

    /* Fonts & Common */
    --font-primary: 'Montserrat', sans-serif;
    --font-secondary: 'Playfair Display', serif;
    --border-radius-sm: 8px;
    --border-radius-md: 15px;
    --border-radius-lg: 25px;
    --transition-speed: 0.4s;
    --transition-timing: cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* --- Base & Reset --- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
    scrollbar-width: thin;
    scrollbar-color: var(--accent-color-primary) transparent;
}
body.dark-mode { scrollbar-color: var(--accent-color-primary-dark) transparent; }


body {
    font-family: var(--font-primary);
    line-height: 1.7;
    background: var(--gradient-light);
    color: var(--text-color-light);
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background var(--transition-speed) ease, color var(--transition-speed) ease;
}

body.dark-mode {
    background: var(--gradient-dark);
    color: var(--text-color-dark);
}

/* Remove no-js class style helper */
.no-js .reveal-left,
.no-js .reveal-right,
.no-js .reveal-bottom {
    opacity: 1;
    transform: none;
}

/* --- Scrollbar --- */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background-color: var(--accent-color-primary); border-radius: 10px; border: 2px solid transparent; background-clip: content-box;}
body.dark-mode ::-webkit-scrollbar-thumb { background-color: var(--accent-color-primary-dark); }

/* --- Progress Bar --- */
#progress-bar {
    position: fixed; top: 0; left: 0; width: 0; height: 5px;
    background: var(--gradient-accent);
    z-index: 5000; /* Highest */
    transition: width 0.2s ease-out;
    box-shadow: 0 2px 10px var(--accent-color-secondary);
}
body.dark-mode #progress-bar { background: var(--gradient-accent-dark); box-shadow: 0 2px 10px var(--accent-color-secondary-dark); }


/* --- Header --- */
header {
    position: relative; height: 100vh; display: flex; flex-direction: column;
    justify-content: center; align-items: center; text-align: center;
    overflow: hidden; color: #fff;
}
.header-background {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    overflow: hidden; z-index: 0;
}
.header-background img {
    width: 100%; height: 100%; object-fit: cover;
    transform: scale(1.1); /* Initial slightly zoomed in */
    transition: transform 8s cubic-bezier(0.25, 0.1, 0.25, 1), filter 1s ease;
    filter: brightness(0.65);
}
body:not(.no-js) .header-background img { transform: scale(1.3); } /* Start more zoomed for animation */
header:hover .header-background img { filter: brightness(0.75); transform: scale(1.15); }

.header-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(to bottom, rgba(15, 23, 42, 0.1), rgba(15, 23, 42, 0.6));
    z-index: 1; pointer-events: none;
}
.header-content {
    position: relative; z-index: 3; padding: 20px;
    animation: fadeInContent 1.5s var(--transition-timing) 0.5s forwards;
    opacity: 0;
}
@keyframes fadeInContent { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

header h1 {
    font-family: var(--font-secondary); font-size: clamp(2.8rem, 7vw, 5.5rem);
    color: #fff; text-shadow: 0 3px 15px rgba(0, 0, 0, 0.5);
    margin-bottom: 1rem; letter-spacing: 1px; font-weight: 700;
}
.typing::after { content: '|'; animation: blink 1s step-end infinite; margin-left: 4px; font-weight: 300; }
.typing.typing-finished::after { content: ''; animation: none; }
@keyframes blink { from, to { opacity: 1 } 50% { opacity: 0 } }

.tagline {
    font-size: clamp(1rem, 2.5vw, 1.4rem); color: #e0f2f1;
    text-shadow: 0 1px 5px rgba(0, 0, 0, 0.4); margin-top: 0.5rem; margin-bottom: 2rem;
    max-width: 750px; margin-left: auto; margin-right: auto;
    font-weight: 300; letter-spacing: 0.5px;
}
.header-cta { margin-top: 1.5rem; }

.scroll-down {
    position: absolute; bottom: 30px; z-index: 3; cursor: pointer;
    opacity: 0; animation: fadeInScroll 1s ease-out 3s forwards;
}
@keyframes fadeInScroll { to { opacity: 1; } }
.scroll-arrow {
    width: 20px; height: 20px; border: 2px solid #fff; border-width: 0 0 2px 2px;
    transform: rotate(-45deg); margin: -5px auto;
    animation: scrollBounce 2s infinite;
}
.scroll-arrow:nth-child(2) { animation-delay: 0.15s; }
.scroll-arrow:nth-child(3) { animation-delay: 0.3s; }
@keyframes scrollBounce {
    0%, 100% { transform: translateY(0) rotate(-45deg); opacity: 1; }
    50% { transform: translateY(15px) rotate(-45deg); opacity: 0.3; }
}

/* Waves */
.wave-container { position: absolute; bottom: 0; left: 0; width: 100%; height: 180px; overflow: hidden; z-index: 2; }
.wave { background-repeat: repeat-x; position: absolute; left: 0; width: 6400px; height: 180px; transform-origin: center bottom; animation: waveMove linear infinite; }
.wave1 { background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 500 200" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.00,100.27 C125.56,250.25 370.20,-60.98 500.00,100.27 L500.00,200.00 L0.00,200.00 Z" style="stroke: none; fill: %234db6ac;"></path></svg>'); background-size: auto 100%; bottom: 0; animation-duration: 10s; opacity: 0.8; z-index: 3; }
.wave2 { background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 500 200" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.00,100.27 C150.00,200.00 349.20,-60.98 500.00,100.27 L500.00,200.00 L0.00,200.00 Z" style="stroke: none; fill: %2364c8c0;"></path></svg>'); background-size: auto 100%; bottom: 5px; animation-duration: 14s; animation-direction: alternate; opacity: 0.6; z-index: 2; }
.wave3 { background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 500 200" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.00,100.27 C160.87,60.80 349.20,-60.98 500.00,100.27 L500.00,200.00 L0.00,200.00 Z" style="stroke: none; fill: %2380d4cd;"></path></svg>'); background-size: auto 100%; bottom: 10px; animation-duration: 18s; opacity: 0.4; z-index: 1; }
body.dark-mode .wave1 { background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 500 200" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.00,100.27 C132.56,250.25 349.20,-60.98 500.00,100.27 L500.00,200.00 L0.00,200.00 Z" style="stroke: none; fill: %230d9488;"></path></svg>'); }
body.dark-mode .wave2 { background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 500 200" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.00,100.27 C150.00,200.00 349.20,-60.98 500.00,100.27 L500.00,200.00 L0.00,200.00 Z" style="stroke: none; fill: %230f766e;"></path></svg>'); }
body.dark-mode .wave3 { background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 500 200" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.00,100.27 C160.87,60.80 349.20,-60.98 500.00,100.27 L500.00,200.00 L0.00,200.00 Z" style="stroke: none; fill: %23115e59;"></path></svg>'); }
@keyframes waveMove { 0% { transform: translateX(0); } 100% { transform: translateX(-1600px); } }


/* --- Navigation --- */
nav {
    background: var(--nav-bg-light); padding: 0.8rem 1rem; position: sticky; top: 0; z-index: 1000;
    box-shadow: 0 5px 25px var(--shadow-light); backdrop-filter: blur(12px);
    transition: background var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}
body.dark-mode nav { background: var(--nav-bg-dark); box-shadow: 0 5px 25px var(--shadow-dark); }

.nav-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: center; align-items: center; gap: 1.5rem; position: relative; }
nav a {
    color: #fff; text-decoration: none; padding: 0.7rem 1.2rem; font-weight: 500;
    position: relative; transition: color 0.3s ease, transform 0.3s ease;
    font-size: 0.95rem; letter-spacing: 0.5px;
}
nav a::after {
    content: ''; position: absolute; width: 0; height: 3px; bottom: -2px; left: 50%;
    background: var(--accent-color-secondary); border-radius: 2px;
    transition: all 0.35s var(--transition-timing); transform: translateX(-50%);
}
body.dark-mode nav a::after { background: var(--accent-color-secondary-dark); }

nav a:hover, nav a.active { color: var(--accent-color-secondary); transform: translateY(-2px); }
body.dark-mode nav a:hover, body.dark-mode nav a.active { color: var(--accent-color-secondary-dark); }
nav a:hover::after, nav a.active::after { width: 70%; }

.dark-mode-toggle {
    position: absolute; right: 20px; top: 50%; transform: translateY(-50%);
    background: transparent; border: 2px solid var(--accent-color-secondary);
    border-radius: 50%; width: 40px; height: 40px; color: var(--accent-color-secondary);
    cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.1rem;
    transition: all 0.3s ease;
}
body.dark-mode .dark-mode-toggle { border-color: var(--accent-color-secondary-dark); color: var(--accent-color-secondary-dark); }
.dark-mode-toggle:hover { background: var(--accent-color-secondary); color: #5f4300; transform: translateY(-50%) scale(1.1) rotate(15deg); }
body.dark-mode .dark-mode-toggle:hover { background: var(--accent-color-secondary-dark); color: #1e293b; }


/* --- Table of Contents (TOC) --- */
#toc {
    position: fixed; top: 0; left: 0; width: 260px; height: 100vh;
    background: var(--nav-bg-light); box-shadow: 3px 0 15px var(--shadow-light);
    z-index: 1500; padding: 1.5rem 1rem 1rem 1.5rem;
    transform: translateX(0); transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55), background var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    display: flex; flex-direction: column;
}
body.dark-mode #toc { background: var(--nav-bg-dark); box-shadow: 3px 0 15px var(--shadow-dark); }
#toc.collapsed { transform: translateX(-225px); }

#toc h3 {
    color: #fff; font-family: var(--font-secondary); font-size: 1.6rem; margin-bottom: 1.5rem;
    text-align: left; font-weight: 700; border-bottom: 2px solid var(--accent-color-secondary);
    padding-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;
}
body.dark-mode #toc h3 { border-bottom-color: var(--accent-color-secondary-dark); }
#toc h3 i { color: var(--accent-color-secondary); }
body.dark-mode #toc h3 i { color: var(--accent-color-secondary-dark); }

#toc ul { list-style: none; flex: 1; overflow-y: auto; padding-right: 0.5rem; }
#toc ul::-webkit-scrollbar { width: 5px; }
#toc ul::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.5); border-radius: 5px;}
body.dark-mode #toc ul::-webkit-scrollbar-thumb { background-color: rgba(255, 202, 40, 0.6); }

#toc li { margin-bottom: 0.5rem; }
#toc a {
    color: #e0f2f1; text-decoration: none; font-size: 0.9rem; font-weight: 400;
    transition: all 0.3s ease; display: block; padding: 0.6rem 1rem; border-radius: var(--border-radius-sm);
    position: relative; overflow: hidden; border-left: 3px solid transparent;
}
body.dark-mode #toc a { color: #cbd5e1; }
#toc a::before {
    content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
    background: var(--accent-color-secondary); opacity: 0.15; transition: left 0.4s ease; z-index: -1;
}
body.dark-mode #toc a::before { background: var(--accent-color-secondary-dark); }

#toc a:hover { color: #fff; border-left-color: var(--accent-color-secondary); }
body.dark-mode #toc a:hover { color: var(--accent-color-secondary-dark); border-left-color: var(--accent-color-secondary-dark); }
#toc a.active { color: #fff; font-weight: 600; background-color: rgba(255, 255, 255, 0.1); border-left-color: var(--accent-color-secondary); }
body.dark-mode #toc a.active { color: var(--accent-color-secondary-dark); background-color: rgba(252, 211, 77, 0.1); border-left-color: var(--accent-color-secondary-dark); }
#toc a:hover::before, #toc a.active::before { left: 0; }

#toc-toggle {
    position: absolute; top: 15px; right: -45px; background: var(--gradient-accent);
    border: none; border-radius: 0 50% 50% 0; width: 45px; height: 45px;
    color: #fff; font-size: 1.3rem; cursor: pointer; display: flex; align-items: center; justify-content: center;
    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2); transition: all 0.3s ease;
}
body.dark-mode #toc-toggle { background: var(--gradient-accent-dark); }
#toc-toggle:hover { transform: scale(1.1); box-shadow: 3px 3px 15px rgba(0, 0, 0, 0.3); }


/* --- Main Container & Sections --- */
.container {
    width: calc(100% - 310px); /* Account for TOC width + margin */
    max-width: 1300px;
    margin: 0 auto;
    padding: 5rem 0;
    margin-left: 280px; /* Default TOC space */
    transition: margin-left var(--transition-speed) ease;
}

#toc.collapsed + .container {
    width: calc(100% - 60px);
    margin-left: 30px; /* Margin when TOC is collapsed */
}

.section {
    padding: 4rem; background: var(--card-bg-light); border-radius: var(--border-radius-lg);
    margin-bottom: 4rem; box-shadow: 0 10px 35px var(--shadow-light);
    transition: background var(--transition-speed) ease, box-shadow var(--transition-speed) ease, transform 0.5s var(--transition-timing), border-color 0.3s ease;
    display: grid; grid-template-columns: 1fr; gap: 2.5rem; align-items: center; position: relative; overflow: hidden;
    border: 1px solid transparent;
    opacity: 0; /* For Intersection Observer */
}
body.dark-mode .section { background: var(--card-bg-dark); box-shadow: 0 10px 40px var(--shadow-dark); }

.section.fade-in { opacity: 1; } /* Applied by JS observer */

.section:hover {
    transform: translateY(-5px) scale(1.01);
    box-shadow: 0 18px 50px var(--shadow-light);
    border-color: var(--accent-color-primary);
}
body.dark-mode .section:hover {
     box-shadow: 0 18px 55px var(--shadow-dark);
     border-color: var(--accent-color-primary-dark);
}

.section:not(.full-width):not(.introductory-section) { grid-template-columns: repeat(auto-fit, minmax(min(350px, 100%), 1fr)); } /* Responsive columns */

.layout-image-left .section-image { order: 1; }
.layout-image-left .section-content { order: 2; }
.layout-image-right .section-image { order: 2; }
.layout-image-right .section-content { order: 1; }

.section h2 {
    font-family: var(--font-secondary); font-size: clamp(2.2rem, 4.5vw, 3.2rem);
    color: var(--heading-color-light); margin-bottom: 1rem; position: relative; font-weight: 700;
}
body.dark-mode .section h2 { color: var(--heading-color-dark); }

.section:not(.introductory-section) h2 { text-align: center; grid-column: 1 / -1; margin-bottom: 1.5rem; }
.section:not(.introductory-section) h2::after {
    content: ''; width: 70px; height: 4px; background: var(--gradient-accent); border-radius: 2px;
    position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%);
}
body.dark-mode .section:not(.introductory-section) h2::after { background: var(--gradient-accent-dark); }


.section-subtitle {
    text-align: center; font-size: 1.1rem; color: var(--text-color-light-secondary);
    margin-top: -0.5rem; margin-bottom: 2.5rem; font-weight: 400; grid-column: 1 / -1;
}
body.dark-mode .section-subtitle { color: var(--text-color-dark-secondary); }

.section p { font-size: 1.05rem; line-height: 1.8; margin-bottom: 1rem; color: var(--text-color-light); }
body.dark-mode .section p { color: var(--text-color-dark); }

.section ul { list-style: none; padding-left: 0.5rem; margin-bottom: 1.5rem; }
.section li { margin-bottom: 0.8rem; padding-left: 1.5rem; position: relative; }
.section li i { position: absolute; left: 0; top: 5px; color: var(--accent-color-primary); font-size: 0.9em; }
body.dark-mode .section li i { color: var(--accent-color-primary-dark); }

.section img {
    width: 100%; border-radius: var(--border-radius-md); border: 1px solid var(--border-color-light);
    transition: transform 0.4s var(--transition-timing), box-shadow 0.4s var(--transition-timing), border-color var(--transition-speed) ease;
    object-fit: cover; display: block; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
    max-height: 450px;
}
body.dark-mode .section img { border-color: var(--border-color-dark); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15); }

.section img:hover {
    transform: scale(1.03); box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
}
body.dark-mode .section img:hover { box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2); }


/* Specific Section Styles */
.introductory-section {
    grid-template-columns: auto 1fr; grid-template-rows: auto auto auto;
    grid-template-areas: "icon title" "content image" "cta image";
    align-items: start; gap: 2rem 3rem; padding: 3rem 4rem;
}
.introductory-section .section-icon { grid-area: icon; font-size: 3rem; color: var(--accent-color-primary); justify-self: center; align-self: center; }
body.dark-mode .introductory-section .section-icon { color: var(--accent-color-primary-dark); }
.introductory-section h2 { grid-area: title; margin-bottom: 0.5rem; text-align: left; }
.introductory-section .section-content { grid-area: content; padding-right: 1rem; }
.introductory-section .section-image { grid-area: image; align-self: center; }
.introductory-section .cta { grid-area: cta; margin-top: 1rem; justify-self: start; }
.introductory-section ul { padding-left: 0; } /* Reset list style for intro */
.introductory-section li { padding-left: 2.2rem; }
.introductory-section li i { top: 7px; font-size: 1.1em; }

.planning-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2.5rem; margin-top: 2rem; }
.planning-item { background: rgba(255, 255, 255, 0.5); padding: 1.5rem; border-radius: var(--border-radius-md); border: 1px solid var(--border-color-light); transition: all 0.3s ease; }
body.dark-mode .planning-item { background: rgba(30, 41, 59, 0.5); border-color: var(--border-color-dark); }
.planning-item:hover { transform: translateY(-5px); box-shadow: 0 10px 20px var(--shadow-light); border-color: var(--accent-color-primary); }
body.dark-mode .planning-item:hover { box-shadow: 0 10px 25px var(--shadow-dark); border-color: var(--accent-color-primary-dark); }
.planning-icon { font-size: 2rem; color: var(--accent-color-primary); margin-bottom: 1rem; }
body.dark-mode .planning-icon { color: var(--accent-color-primary-dark); }
.planning-item h3 { font-family: var(--font-secondary); font-size: 1.3rem; margin-bottom: 0.5rem; color: var(--heading-color-light); }
body.dark-mode .planning-item h3 { color: var(--heading-color-dark); }
.planning-item p { font-size: 0.95rem; margin-bottom: 0.5rem; color: var(--text-color-light-secondary); }
body.dark-mode .planning-item p { color: var(--text-color-dark-secondary); }
.itinerary-item p { margin-bottom: 0.8rem; } /* More space for itinerary items */

.map-container { border-radius: var(--border-radius-md); overflow: hidden; margin: 2rem 0; box-shadow: 0 10px 30px var(--shadow-light); border: 1px solid var(--border-color-light); }
body.dark-mode .map-container { box-shadow: 0 10px 30px var(--shadow-dark); border-color: var(--border-color-dark); }
.map-container iframe { display: block; } /* Remove potential iframe spacing */

.activities-list i { top: 7px; }

.cuisine-container .card { background: transparent; box-shadow: none; padding: 0; } /* Simpler cards for cuisine */
body.dark-mode .cuisine-container .card { background: transparent; }
.cuisine-container .card:hover { transform: none; box-shadow: none; }
.cuisine-container .card-image-wrapper { aspect-ratio: 4 / 3; border-radius: var(--border-radius-md); }
.cuisine-container .card img { border: 1px solid var(--border-color-light); border-radius: var(--border-radius-md); transition: transform 0.4s ease, box-shadow 0.4s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.07); }
body.dark-mode .cuisine-container .card img { border-color: var(--border-color-dark); box-shadow: 0 5px 15px rgba(0,0,0,0.15); }
.cuisine-container .card:hover img { transform: scale(1.05); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
body.dark-mode .cuisine-container .card:hover img { box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
.cuisine-container .card-content { padding: 1rem 0.5rem; }
.cuisine-container .card h3 { font-size: 1.3rem; margin-bottom: 0.3rem; }
.cuisine-container .card p { font-size: 0.9rem; color: var(--text-color-light-secondary); margin-bottom: 0; }
body.dark-mode .cuisine-container .card p { color: var(--text-color-dark-secondary); }


.tips-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; margin-top: 2rem; }
.tip-item { text-align: center; }
.tip-icon { font-size: 2.5rem; color: var(--accent-color-primary); margin-bottom: 1rem; display: inline-block; transition: transform 0.3s ease; }
body.dark-mode .tip-icon { color: var(--accent-color-primary-dark); }
.tip-item:hover .tip-icon { transform: scale(1.1) rotate(-5deg); }
.tip-item h4 { font-family: var(--font-secondary); font-size: 1.2rem; margin-bottom: 0.5rem; color: var(--heading-color-light); }
body.dark-mode .tip-item h4 { color: var(--heading-color-dark); }
.tip-item p { font-size: 0.9rem; color: var(--text-color-light-secondary); line-height: 1.6; }
body.dark-mode .tip-item p { color: var(--text-color-dark-secondary); }


.gallery-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
.gallery-item { overflow: hidden; border-radius: var(--border-radius-md); box-shadow: 0 5px 15px var(--shadow-light); transition: transform 0.3s ease, box-shadow 0.3s ease; }
body.dark-mode .gallery-item { box-shadow: 0 5px 15px var(--shadow-dark); }
.gallery-item img { display: block; width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; cursor: pointer; }
.gallery-item:hover { transform: scale(1.05); z-index: 10; box-shadow: 0 15px 30px var(--shadow-light); }
body.dark-mode .gallery-item:hover { box-shadow: 0 15px 30px var(--shadow-dark); }
.gallery-item:hover img { transform: scale(1.1); }


/* --- Cards --- */
.card-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(min(300px, 100% - 2rem), 1fr)); gap: 2.5rem; padding: 1rem 0; } /* Responsive card columns */
.card {
    background: var(--card-bg-light); border-radius: var(--border-radius-md); padding: 0; text-align: center;
    transition: all 0.4s var(--transition-timing), background var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    backdrop-filter: blur(8px); position: relative; overflow: hidden;
    box-shadow: 0 8px 20px var(--shadow-light); display: flex; flex-direction: column;
    border: 1px solid var(--border-color-light);
}
body.dark-mode .card { background: var(--card-bg-dark); box-shadow: 0 8px 25px var(--shadow-dark); border-color: var(--border-color-dark); }

.card:hover { transform: translateY(-10px) scale(1.03); box-shadow: 0 15px 40px var(--shadow-light); }
body.dark-mode .card:hover { box-shadow: 0 15px 45px var(--shadow-dark); }

.card-image-wrapper { position: relative; overflow: hidden; aspect-ratio: 16 / 10; border-radius: var(--border-radius-md) var(--border-radius-md) 0 0; }
.card img { width: 100%; height: 100%; object-fit: cover; border-radius: 0; margin-bottom: 0; border: none; box-shadow: none; transition: transform 0.5s ease; }
.card:hover img { transform: scale(1.1); }
.card-content { padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; }
.card h3 { color: var(--heading-color-light); font-family: var(--font-secondary); font-size: 1.6rem; margin-bottom: 0.7rem; font-weight: 700; }
body.dark-mode .card h3 { color: var(--heading-color-dark); }
.card p { font-size: 0.95rem; margin-bottom: 1rem; color: var(--text-color-light); flex-grow: 1; }
body.dark-mode .card p { color: var(--text-color-dark); }

/* Card Interactivity */
.interactive-card .rating { margin-bottom: 1rem; }
.rating { unicode-bidi: bidi-override; direction: ltr; display: inline-block; }
.rating .star { cursor: pointer; color: #d1d5db; font-size: 1.4rem; transition: color 0.2s ease, transform 0.2s ease; display: inline-block; }
body.dark-mode .rating .star { color: #4b5563; }
.rating .star i { transition: inherit; }
.rating .star:hover { transform: scale(1.2); }
.rating .star.hover, .rating .star.active { color: var(--accent-color-secondary); }
body.dark-mode .rating .star.hover, body.dark-mode .rating .star.active { color: var(--accent-color-secondary-dark); }

.comment-box {
    width: 100%; margin-top: 1rem; padding: 0.8rem; border-radius: var(--border-radius-sm);
    background: rgba(77, 182, 172, 0.08); color: var(--text-color-light); border: 1px solid var(--border-color-light);
    resize: vertical; min-height: 60px; font-size: 0.9rem; transition: background 0.3s ease, border-color 0.3s ease;
}
body.dark-mode .comment-box { background: rgba(252, 211, 77, 0.08); border-color: var(--border-color-dark); color: var(--text-color-dark); }
.comment-box::placeholder { color: var(--text-color-light-secondary); }
body.dark-mode .comment-box::placeholder { color: var(--text-color-dark-secondary); }
.comment-box:focus { background: #fff; border-color: var(--accent-color-primary); outline: none; box-shadow: 0 0 0 2px rgba(77, 182, 172, 0.2); }
body.dark-mode .comment-box:focus { background: #1e293b; border-color: var(--accent-color-secondary-dark); box-shadow: 0 0 0 2px rgba(252, 211, 77, 0.2); }

.submit-comment { margin-top: 1rem; align-self: center; }

/* Filter Buttons */
.filter-container { display: flex; gap: 1rem; justify-content: center; margin-bottom: 3rem; flex-wrap: wrap; }
.filter-btn {
    padding: 0.7rem 1.5rem; background: transparent; border: 2px solid var(--accent-color-primary);
    border-radius: 50px; color: var(--accent-color-primary); cursor: pointer; transition: all 0.3s ease;
    font-weight: 500; font-size: 0.95rem;
}
body.dark-mode .filter-btn { border-color: var(--accent-color-primary-dark); color: var(--accent-color-primary-dark); }
.filter-btn.active, .filter-btn:hover { background: var(--accent-color-primary); color: #fff; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(77, 182, 172, 0.3); }
body.dark-mode .filter-btn.active, body.dark-mode .filter-btn:hover { background: var(--accent-color-primary-dark); color: #111827; box-shadow: 0 4px 10px rgba(94, 234, 212, 0.3); }

.places-container .place-card { transition: opacity 0.4s ease, transform 0.4s ease, box-shadow 0.4s ease; }


/* --- CTA Button --- */
.cta {
    display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.8rem 1.8rem;
    background: var(--gradient-accent); color: #fff; text-decoration: none; border-radius: 50px; font-weight: 600;
    transition: all 0.35s var(--transition-timing); box-shadow: 0 6px 18px rgba(77, 182, 172, 0.3);
    position: relative; overflow: hidden; border: none; font-size: 1rem; cursor: pointer;
}
body.dark-mode .cta { background: var(--gradient-accent-dark); box-shadow: 0 6px 18px rgba(94, 234, 212, 0.2); }
.cta i { transition: transform 0.3s ease; }
.cta::before {
    content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.15);
    transform: scaleX(0); transform-origin: left; transition: transform 0.4s ease; z-index: 0; border-radius: 50px;
}
.cta:hover::before { transform: scaleX(1); }
.cta span, .cta i { position: relative; z-index: 1; }
.cta:hover { transform: translateY(-4px); box-shadow: 0 10px 25px rgba(77, 182, 172, 0.4); }
body.dark-mode .cta:hover { box-shadow: 0 10px 25px rgba(94, 234, 212, 0.3); }
.cta:hover i { transform: translateX(4px); }
.cta:active { transform: translateY(-1px); box-shadow: 0 4px 10px rgba(77, 182, 172, 0.3); }
body.dark-mode .cta:active { box-shadow: 0 4px 10px rgba(94, 234, 212, 0.2); }
.cta-small { padding: 0.6rem 1.2rem; font-size: 0.9rem; }


/* --- Footer --- */
footer {
    background: var(--nav-bg-light); color: #e0f2f1; text-align: center; padding: 3rem 1rem 1.5rem;
    font-size: 0.9rem; box-shadow: 0 -8px 25px var(--shadow-light); position: relative; margin-top: 4rem;
    transition: background var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
}
body.dark-mode footer { background: var(--nav-bg-dark); color: #cbd5e1; box-shadow: 0 -8px 25px var(--shadow-dark); }
footer::before {
    content: ''; position: absolute; top: -1px; left: 0; width: 100%; height: 100px;
    background: inherit; clip-path: polygon(0 100%, 100% 100%, 100% 10%, 75% 0%, 50% 10%, 25% 0%, 0 10%);
    transform: translateY(-99%);
}
.footer-content { max-width: 800px; margin: 0 auto; }
.footer-content p { margin-bottom: 0.5rem; line-height: 1.5; opacity: 0.8; }
.social-links { margin-top: 1rem; }
.social-links a {
    color: #fff; text-decoration: none; font-size: 1.3rem; margin: 0 0.7rem;
    transition: color 0.3s ease, transform 0.3s ease; display: inline-block;
}
body.dark-mode .social-links a { color: var(--accent-color-primary-dark); }
.social-links a:hover { color: var(--accent-color-secondary); transform: scale(1.2) rotate(5deg); }
body.dark-mode .social-links a:hover { color: var(--accent-color-secondary-dark); }


/* --- Image Modal --- */
.modal {
    display: none; position: fixed; z-index: 4000; left: 0; top: 0; width: 100%; height: 100%;
    background-color: rgba(15, 23, 42, 0.92); justify-content: center; align-items: center;
    opacity: 0; transition: opacity 0.4s ease; backdrop-filter: blur(5px);
}
.modal.active { display: flex; opacity: 1; }
.modal-content {
    max-width: 90%; max-height: 90vh; display: block; /* Ensure img is block */
    transform: scale(0.7); transition: transform 0.4s var(--transition-timing);
    border: 5px solid var(--accent-color-secondary); border-radius: var(--border-radius-sm);
    box-shadow: 0 0 40px rgba(0, 0, 0, 0.5);
}
body.dark-mode .modal-content { border-color: var(--accent-color-secondary-dark); }
.modal.active .modal-content { transform: scale(1); }
.close {
    position: absolute; top: 15px; right: 30px; color: var(--accent-color-secondary); font-size: 45px; font-weight: bold;
    cursor: pointer; transition: color 0.3s ease, transform 0.3s ease;
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.7); z-index: 1;
}
body.dark-mode .close { color: var(--accent-color-secondary-dark); }
.close:hover { color: #fff; transform: rotate(90deg); }


/* --- Chat Box --- */
.chat-box {
    position: fixed; bottom: 90px; right: 20px; width: 350px; background: var(--card-bg-light);
    border-radius: var(--border-radius-md); box-shadow: 0 10px 40px var(--shadow-light); z-index: 2000; overflow: hidden;
    opacity: 0; transform: translateY(30px) scale(0.9); transform-origin: bottom right;
    transition: opacity 0.4s ease, transform 0.4s ease, background var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
    display: none; border: 1px solid var(--border-color-light);
}
body.dark-mode .chat-box { background: var(--card-bg-dark); box-shadow: 0 10px 40px var(--shadow-dark); border-color: var(--border-color-dark); }
.chat-box.active { display: block; opacity: 1; transform: translateY(0) scale(1); }

.chat-header {
    background: var(--gradient-accent); color: #fff; padding: 12px 15px; font-weight: 600;
    display: flex; justify-content: space-between; align-items: center; border-radius: var(--border-radius-md) var(--border-radius-md) 0 0; cursor: default;
}
body.dark-mode .chat-header { background: var(--gradient-accent-dark); }
.chat-header span { display: flex; align-items: center; gap: 0.5rem; font-size: 0.95rem; }
.chat-toggle { background: none; border: none; color: rgba(255, 255, 255, 0.8); font-size: 1.3rem; cursor: pointer; transition: transform 0.3s ease, color 0.3s ease; padding: 5px; }
.chat-toggle:hover { transform: scale(1.15) rotate(90deg); color: #fff; }

.chat-body { display: flex; flex-direction: column; height: 420px; }
.chat-messages { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
.message { max-width: 85%; padding: 10px 15px; border-radius: 15px; font-size: 0.95rem; line-height: 1.5; opacity: 0; transform: translateY(15px); animation: fadeInUpMessage 0.5s var(--transition-timing) forwards; word-wrap: break-word; }
@keyframes fadeInUpMessage { to { opacity: 1; transform: translateY(0); } }

.bot-message { background: #e0f2f1; color: var(--text-color-light); align-self: flex-start; border-radius: 15px 15px 15px 0; box-shadow: 2px 2px 5px rgba(0,0,0,0.05); }
body.dark-mode .bot-message { background: #1e293b; color: var(--text-color-dark); box-shadow: 2px 2px 5px rgba(0,0,0,0.1); }
.user-message { background: var(--accent-color-primary); color: #fff; align-self: flex-end; border-radius: 15px 15px 0 15px; box-shadow: -2px 2px 5px rgba(0,0,0,0.05); }
body.dark-mode .user-message { background: var(--accent-color-primary-dark); color: #111827; }

.chat-typing-indicator { padding: 5px 15px; display: none; align-items: center; }
.chat-typing-indicator span { height: 8px; width: 8px; margin: 0 2px; background-color: var(--text-color-light-secondary); border-radius: 50%; display: inline-block; animation: typingBounce 1.4s infinite ease-in-out both; }
.chat-typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
.chat-typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
@keyframes typingBounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
body.dark-mode .chat-typing-indicator span { background-color: var(--text-color-dark-secondary); }

.chat-input { display: flex; padding: 12px; border-top: 1px solid var(--border-color-light); background: rgba(255, 255, 255, 0.5); }
body.dark-mode .chat-input { border-top-color: var(--border-color-dark); background: rgba(30, 41, 59, 0.5); }
.chat-input input { flex: 1; padding: 10px 15px; border: 1px solid var(--border-color-light); border-radius: 20px; background: #fff; color: var(--text-color-light); outline: none; margin-right: 10px; font-size: 0.95rem; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
body.dark-mode .chat-input input { background: #334155; border-color: #475569; color: var(--text-color-dark); }
.chat-input input:focus { border-color: var(--accent-color-primary); box-shadow: 0 0 0 2px rgba(77, 182, 172, 0.2); }
body.dark-mode .chat-input input:focus { border-color: var(--accent-color-primary-dark); box-shadow: 0 0 0 2px rgba(94, 234, 212, 0.2); }
.chat-input button { background: var(--accent-color-primary); border: none; border-radius: 50%; width: 42px; height: 42px; color: #fff; cursor: pointer; transition: all 0.3s ease; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 1.1rem; }
body.dark-mode .chat-input button { background: var(--accent-color-primary-dark); color: #111827; }
.chat-input button:hover { transform: scale(1.1) rotate(10deg); box-shadow: 0 5px 15px rgba(77, 182, 172, 0.3); }
body.dark-mode .chat-input button:hover { box-shadow: 0 5px 15px rgba(94, 234, 212, 0.2); }
.chat-input button:disabled { opacity: 0.6; cursor: not-allowed; transform: scale(1) rotate(0); box-shadow: none; }

.chat-open-btn {
    position: fixed; bottom: 20px; right: 20px; background: var(--gradient-accent); border: none; border-radius: 50%; width: 60px; height: 60px; color: #fff; font-size: 1.8rem; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 20px rgba(77, 182, 172, 0.4); transition: all 0.4s ease; z-index: 1999; opacity: 1; transform: scale(1);
}
body.dark-mode .chat-open-btn { background: var(--gradient-accent-dark); box-shadow: 0 8px 20px rgba(94, 234, 212, 0.25); }
.chat-open-btn.hidden { opacity: 0; transform: scale(0); pointer-events: none; }
.chat-open-btn:hover { transform: scale(1.1) rotate(-5deg); box-shadow: 0 12px 25px rgba(77, 182, 172, 0.5); }
body.dark-mode .chat-open-btn:hover { box-shadow: 0 12px 25px rgba(94, 234, 212, 0.35); }
.chat-notification-dot { position: absolute; top: 10px; right: 10px; width: 10px; height: 10px; background-color: #ef4444; border-radius: 50%; border: 1px solid white; display: none; animation: pulse 1.5s infinite; }
@keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.3); opacity: 0.7; } 100% { transform: scale(1); opacity: 1; } }


/* --- Back to Top Button --- */
.back-to-top {
    position: fixed; bottom: -60px; right: 20px; background: rgba(77, 182, 172, 0.8); border: none; border-radius: 50%; width: 50px; height: 50px; color: #fff; font-size: 1.3rem; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 5px 15px var(--shadow-light); transition: all 0.4s ease; z-index: 1998; opacity: 0; pointer-events: none; backdrop-filter: blur(3px);
}
body.dark-mode .back-to-top { background: rgba(94, 234, 212, 0.8); box-shadow: 0 5px 15px var(--shadow-dark); color: #1e293b;}
.back-to-top.visible { bottom: 90px; opacity: 1; pointer-events: auto; }
.back-to-top:hover { background: var(--accent-color-primary); transform: translateY(-3px); box-shadow: 0 8px 20px var(--shadow-light); }
body.dark-mode .back-to-top:hover { background: var(--accent-color-primary-dark); box-shadow: 0 8px 20px var(--shadow-dark); }


/* --- Scroll Reveal Animations --- */
.reveal-left, .reveal-right, .reveal-bottom {
    opacity: 0;
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}
.reveal-left { transform: translateX(-50px); }
.reveal-right { transform: translateX(50px); }
.reveal-bottom { transform: translateY(50px); }
.section.fade-in .reveal-left,
.section.fade-in .reveal-right,
.section.fade-in .reveal-bottom { opacity: 1; transform: translate(0, 0); }

/* Staggered Card Animation */
.card-container.reveal-bottom .card,
.planning-grid .planning-item.reveal-bottom,
.tips-grid .tip-item.reveal-bottom,
.gallery-grid .gallery-item.reveal-bottom {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s var(--transition-timing), transform 0.6s var(--transition-timing);
}
.fade-in .card-container.reveal-bottom .card,
.fade-in .planning-grid .planning-item.reveal-bottom,
.fade-in .tips-grid .tip-item.reveal-bottom,
.fade-in .gallery-grid .gallery-item.reveal-bottom { opacity: 1; transform: translateY(0); }

/* Apply individual delays using inline style or nth-child */
.fade-in .card-container.reveal-bottom .card:nth-child(1),
.fade-in .planning-grid .planning-item:nth-child(1),
.fade-in .tips-grid .tip-item:nth-child(1),
.fade-in .gallery-grid .gallery-item:nth-child(1) { transition-delay: 0.1s; }
.fade-in .card-container.reveal-bottom .card:nth-child(2),
.fade-in .planning-grid .planning-item:nth-child(2),
.fade-in .tips-grid .tip-item:nth-child(2),
.fade-in .gallery-grid .gallery-item:nth-child(2) { transition-delay: 0.2s; }
.fade-in .card-container.reveal-bottom .card:nth-child(3),
.fade-in .planning-grid .planning-item:nth-child(3),
.fade-in .tips-grid .tip-item:nth-child(3),
.fade-in .gallery-grid .gallery-item:nth-child(3) { transition-delay: 0.3s; }
/* Add more nth-child delays as needed */
.fade-in .planning-grid .planning-item:nth-child(4),
.fade-in .tips-grid .tip-item:nth-child(4),
.fade-in .gallery-grid .gallery-item:nth-child(4) { transition-delay: 0.4s; }
.fade-in .planning-grid .planning-item:nth-child(5),
.fade-in .tips-grid .tip-item:nth-child(5),
.fade-in .gallery-grid .gallery-item:nth-child(5) { transition-delay: 0.5s; }
.fade-in .tips-grid .tip-item:nth-child(6),
.fade-in .gallery-grid .gallery-item:nth-child(6) { transition-delay: 0.6s; }


/* --- Responsive Adjustments --- */
@media (max-width: 1100px) {
    .container { width: calc(100% - 60px); margin-left: 30px; }
    #toc.collapsed + .container { margin-left: 30px; }
    nav .nav-container { gap: 1rem; }
    nav a { padding: 0.7rem 0.8rem; font-size: 0.9rem; }
    .dark-mode-toggle { right: 15px; }
    #toc { width: 230px; }
    #toc.collapsed { transform: translateX(-200px); }

    .introductory-section { grid-template-columns: 1fr; grid-template-areas: "icon" "title" "image" "content" "cta"; text-align: center; padding: 3rem 2rem; }
    .introductory-section h2, .introductory-section .section-icon, .introductory-section .cta { justify-self: center; text-align: center; }
    .introductory-section .section-content { padding-right: 0; }
    .introductory-section .section-image { margin: 1.5rem 0; }

    .section:not(.full-width):not(.introductory-section) { grid-template-columns: 1fr; padding: 3rem 2rem; }
    .section:not(.full-width):not(.introductory-section) .section-image,
    .section:not(.full-width):not(.introductory-section) .section-content { order: unset !important; }
    .section:not(.full-width):not(.introductory-section) .section-image { margin-bottom: 2rem; }
    .section h2 { font-size: clamp(2rem, 4vw, 2.8rem); }
}

@media (max-width: 768px) {
    body { line-height: 1.6; }
    header h1 { font-size: clamp(2.2rem, 6vw, 3.5rem); }
    .tagline { font-size: clamp(0.9rem, 2vw, 1.1rem); }

    nav .nav-container { flex-direction: column; gap: 0.3rem; padding: 0.5rem 0; }
    nav a { padding: 0.5rem 1rem; }
    .dark-mode-toggle { position: static; transform: none; margin-top: 0.5rem; }

    #toc { width: 200px; }
    #toc.collapsed { transform: translateX(-175px); }
    #toc h3 { font-size: 1.4rem; }
    #toc a { font-size: 0.85rem; padding: 0.5rem 0.8rem; }
    #toc-toggle { width: 40px; height: 40px; right: -40px; font-size: 1.2rem; }

    .container { padding: 4rem 0 2rem 0; margin-left: 25px; width: calc(100% - 40px); }
    #toc.collapsed + .container { margin-left: 25px; }

    .section { padding: 2rem 1.5rem; margin-bottom: 3rem; border-radius: var(--border-radius-md); gap: 1.5rem; }
    .section h2 { margin-bottom: 1rem; }
    .section:not(.introductory-section) h2::after { bottom: -10px; width: 50px; height: 3px; }
    .section p, .introductory-section p { font-size: 0.95rem; }
    .section-subtitle { font-size: 1rem; margin-bottom: 1.5rem; }

    .card-container, .planning-grid, .tips-grid, .gallery-grid { grid-template-columns: 1fr; gap: 2rem; }
    .card { border-radius: var(--border-radius-md); }
    .card h3 { font-size: 1.4rem; }
    .rating .star { font-size: 1.2rem; }
    .planning-item { padding: 1.2rem; }
    .tip-icon { font-size: 2rem; }
    .tip-item h4 { font-size: 1.1rem; }

    .filter-container { gap: 0.5rem; margin-bottom: 2rem; }
    .filter-btn { padding: 0.6rem 1.2rem; font-size: 0.9rem; }

    .cta { padding: 0.7rem 1.5rem; font-size: 0.95rem; }
    .cta-small { padding: 0.5rem 1rem; font-size: 0.85rem; }

    footer { padding: 2.5rem 1rem 1rem; font-size: 0.85rem; }
    .social-links a { font-size: 1.1rem; margin: 0 0.5rem; }
    footer::before { height: 80px; clip-path: polygon(0 100%, 100% 100%, 100% 15%, 75% 0%, 50% 15%, 25% 0%, 0 15%); }

    .chat-box { width: calc(100% - 30px); max-width: 320px; bottom: 75px; right: 15px; }
    .chat-body { height: 380px; }
    .chat-open-btn { width: 55px; height: 55px; font-size: 1.6rem; bottom: 15px; right: 15px; }
    .back-to-top { width: 45px; height: 45px; bottom: -55px; right: 15px; font-size: 1.1rem; }
    .back-to-top.visible { bottom: 80px; } /* Adjust position relative to chat btn */
}

@media (max-width: 480px) {
     header h1 { font-size: clamp(2rem, 7vw, 3rem); }
     .tagline { margin-bottom: 1.5rem; }
     .container { padding: 3rem 0 1.5rem 0; margin-left: 15px; width: calc(100% - 30px); }
     #toc.collapsed + .container { margin-left: 15px; }
     .section { padding: 1.5rem 1rem; }
     .card-container, .planning-grid, .tips-grid, .gallery-grid { gap: 1.5rem; }
     .card h3 { font-size: 1.3rem; }
     .chat-box { bottom: 70px; }
     .chat-open-btn { width: 50px; height: 50px; font-size: 1.5rem; }
     .back-to-top { width: 40px; height: 40px; font-size: 1rem; }
     .back-to-top.visible { bottom: 75px; }
}